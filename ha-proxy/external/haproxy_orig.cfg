defaults
	log global
	mode tcp
	timeout client 10s
	timeout connect 5s
	timeout server 10s
	timeout http-request 10s

frontend main
	bind *:48162,*:48161,*:40001,*:40002,*:40003
	use_backend mongoDB_Mgr1 if { dst_port 40001 }
	use_backend mongoDB_Mgr2 if { dst_port 40002 }
	use_backend mongoDB_Mgr3 if { dst_port 40003 }
	use_backend activeMQBr1 if { dst_port 48161 }
	use_backend activeMQBr2 if { dst_port 48162 }
	default_backend managers

backend managers
	balance roundrobin
	server srv1 sw-swarm-prd-mgr01:80
    server srv2 sw-swarm-prd-mgr02:80
    server srv3 sw-swarm-prd-mgr03:80

backend activeMQBr1
	balance roundrobin
	server srv_activeMQ01_Br1 sw-swarm-prd-mgr01:8161
	server srv_activeMQ02_Br1 sw-swarm-prd-mgr02:8161
	server srv_activeMQ03_Br1 sw-swarm-prd-mgr03:8161

backend activeMQBr2
	balance roundrobin
	server srv_activeMQ01_Br2 sw-swarm-prd-mgr01:8162
	server srv_activeMQ02_Br2 sw-swarm-prd-mgr02:8162
	server srv_activeMQ03_Br2 sw-swarm-prd-mgr03:8162

backend mongoDB_Mgr1
	balance roundrobin
	server srv1_1 sw-swarm-prd-mgr01:30001
	server srv1_2 sw-swarm-prd-mgr02:30001
	server srv1_3 sw-swarm-prd-mgr03:30001

backend mongoDB_Mgr2
	balance roundrobin
	server srv2_1 sw-swarm-prd-mgr01:30002
	server srv2_2 sw-swarm-prd-mgr02:30002
	server srv2_3 sw-swarm-prd-mgr03:30002

backend mongoDB_Mgr3
	balance roundrobin
	server srv3_1 sw-swarm-prd-mgr01:30003
	server srv3_2 sw-swarm-prd-mgr02:30003
	server srv3_3 sw-swarm-prd-mgr03:30003
